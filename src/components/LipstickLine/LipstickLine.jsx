import "./LipstickLine.css";
import { useScroll, useMotionValueEvent } from 'motion/react';
import { useState } from 'react';
import { motion } from 'motion/react';

function LipstickLine() {
    const { scrollY } = useScroll()
    const [hidden, setHidden] = useState(false);
    const THRESHOLD = 150;

    useMotionValueEvent(scrollY, "change", (current) => {
        setHidden(current < THRESHOLD ? false : true)
    })

    return (
        <div className={`lipstick-line-wrapper ${hidden ? "hidden" : ""}`}>
            <motion.svg
                id="lipstick-line"
                width="100%"
                height="100vh"
                viewBox="0 0 508.00046 209.23792"
                preserveAspectRatio="xMinYMid slice"
            >
                <g transform="translate(-0.48268955,-43.711266)">
                    <path
                        d="m 120.27037,43.722403 c -3.84758,-0.18735 -6.97998,2.000651 -12.81886,5.674589 -1.62132,1.257397 -3.31119,2.431183 -4.86379,3.77238 -16.450747,14.211658 -28.505677,32.783114 -40.791817,50.472378 -9.78227,15.60254 -19.74259,31.1141 -28.42566,47.37127 -6.84778,12.82094 -9.12517,17.96928 -14.524691,31.13815 -1.696734,4.13817 -3.252311,8.33302 -4.878255,12.49949 -5.7732125,13.64457 -12.4204085,27.51611 -13.48186545,42.50645 -0.311407,1.8608 26.00482145,6.26474 26.31622145,4.40387 0.51059,-0.3783 1.13569,-0.63782 1.53169,-1.13482 1.04473,-1.3111 4.57232,-7.65035 5.16713,-8.63255 4.66136,-7.69697 9.57266,-15.24564 14.26063,-22.92831 18.65316,-27.95511 35.97679,-56.74933 53.458747,-85.44027 2.88475,-5.03294 5.78263,-10.06567 8.68474,-15.09365 0.87885,10.69565 2.38353,21.34117 4.52892,31.85491 2.31332,11.33654 4.79176,19.22999 7.94732,30.25396 3.56986,10.90547 7.84904,21.53401 12.53412,31.99908 2.36751,5.2884 4.24492,9.57556 7.03213,14.62443 1.06543,1.93 2.27657,3.77574 3.41478,5.66374 4.34453,6.87877 8.00929,14.15029 12.66641,20.83439 2.52037,3.44977 5.85967,8.34638 9.97097,9.08988 5.69522,1.03 11.64577,-0.81364 17.18189,-2.50114 2.83856,-0.8653 5.01065,-3.19241 7.37578,-4.98471 5.66026,-4.28937 12.33033,-10.64175 17.43718,-15.30552 18.71958,-19.73734 33.51707,-42.6627 46.5677,-66.41404 3.16251,-6.27047 6.88529,-12.23465 10.62157,-18.17305 0.79912,-1.2702 1.51378,-2.60332 2.44223,-3.78219 1.23013,-1.5621 3.33888,-3.19568 4.87309,-4.47208 0.93878,-0.78702 1.90521,-1.55279 2.89233,-2.2934 3.9108,8.28368 8.08459,16.42696 12.46745,24.47189 4.69241,8.44327 9.48553,16.81091 14.78566,24.88788 3.13674,5.4504 7.40395,10.07204 11.13679,15.08694 2.95368,4.0948 6.879,7.20176 11.06548,9.93686 3.6038,2.1285 7.17039,4.43548 11.10526,5.92625 1.17917,0.4467 2.40977,0.74275 3.61477,1.11415 10.38912,2.4227 21.22061,1.51807 31.75155,0.6041 12.18781,-0.6311 23.24787,-5.57986 33.9416,-11.04636 11.04463,-6.82957 22.46519,-13.00462 33.62637,-19.62929 15.84953,-9.87127 30.78638,-21.55032 43.31363,-35.46399 2.34979,-2.60987 4.47686,-5.41185 6.71536,-8.11785 5.15104,-6.68027 10.31996,-13.37151 14.50609,-20.71708 1.08431,-1.9027 2.02266,-3.88505 3.03392,-5.82755 1.03603,-1.9674 -26.78607,-16.618603 -27.82207,-14.6513 -5.92804,6.98767 -12.09332,13.7901 -18.64951,20.1967 -7.28045,6.91757 -14.45167,13.9984 -21.98419,20.6437 -7.49583,6.61297 -15.31122,12.88159 -23.04562,19.20916 -2.10391,1.788 -4.21703,3.56522 -6.31176,5.36402 -1.66415,1.42897 -3.23326,2.97221 -4.96456,4.31911 -5.12153,3.9846 -11.10365,6.78665 -16.88114,9.64592 -7.86257,3.6875 -15.98484,6.89022 -24.66102,8.01192 -6.33775,0.4183 -0.69641,0.1081 -7.24194,0.2837 -1.25648,0.034 -3.79084,-1.10632 -3.76824,0.15038 0.0225,1.2611 2.77351,-0.51072 3.77548,0.25528 1.32615,1.0139 -5.40612,-0.14928 -4.94595,0.78652 -0.40201,0.1228 -0.81904,0.20403 -1.20613,0.36793 -0.23273,0.099 -0.38634,0.37698 -0.63666,0.41238 -1.44078,0.2039 -4.7836,-2.76238 -6.10453,-3.24838 -1.11564,-0.4301 -2.20502,-1.00668 -3.3259,-1.40508 -0.1284,-0.046 -0.27464,-0.0871 -0.40566,-0.0501 -0.082,0.024 -0.0741,0.25248 -0.14728,0.20878 -0.20529,-0.1231 -0.29661,-0.37589 -0.44493,-0.56379 -2.93587,-5.0585 -4.73196,-10.78642 -8.29148,-15.51172 -4.60525,-7.56617 -9.67811,-14.91217 -12.95942,-23.19187 -4.94283,-10.24364 -9.86039,-20.64277 -16.69872,-29.78474 -2.35212,-2.8082 -8.28897,-10.20861 -11.76414,-11.18071 -7.78152,-2.1769 -12.05715,-2.04128 -18.58905,0.13332 -6.84016,2.6066 -13.19186,6.23086 -19.06653,10.60556 -1.41005,1.17937 -2.88124,2.28948 -4.23024,3.53828 -1.43504,1.3284 -2.73589,2.79464 -4.11189,4.18424 -6.78453,6.8512 -13.04617,14.1281 -19.2257,21.53047 -16.37455,20.17984 -32.24906,40.80935 -46.38425,62.63959 -0.91385,1.49998 -1.8508,2.98667 -2.78278,4.47621 -0.35403,-0.84938 -0.70113,-1.70167 -1.05936,-2.5492 -1.33683,-3.55077 -2.70609,-7.07006 -3.86075,-10.68823 -3.91924,-12.28097 -6.07823,-25.01717 -8.51576,-37.64784 -1.86768,-9.65097 -3.59836,-19.32862 -5.53403,-28.96619 -3.80988,-18.96854 -8.06159,-37.857343 -12.28348,-56.736587 -0.83725,-3.463491 -2.96551,-12.607147 -4.17494,-16.498735 -0.83197,-2.676991 -0.44238,-6.380406 -2.77141,-7.9406 -8.69883,-5.827235 -13.26148,-8.389905 -17.10903,-8.577255 z m 165.96299,86.066587 c 0.0929,-0.0134 0.18411,-0.0164 0.26769,0.0202 0.0817,0.035 0.1059,0.26775 0.017,0.26665 -0.37523,-0.005 -0.75145,-0.0103 -1.12706,-0.0134 0.18857,-0.0756 0.3727,-0.16038 0.56327,-0.23151 0.091,-0.005 0.18611,-0.0285 0.27905,-0.0419 z"
                        fill="#97163d"
                        mask="url(#revealMask)"
                        filter="url(#specular)"
                    />
                </g>
                <defs>
                    <mask 
                        id="revealMask"
                        maskUnits="userSpaceOnUse"
                        maskContentUnits="userSpaceOnUse"
                        x="0"
                        y="0"
                        width="1806.1538"
                        height="647.53485"
                    >
                        <motion.path
                            d="m 14.383187,232.84227 c 14.274019,-35.90041 33.464261,-70.39085 54.564926,-104.98406 15.876133,-24.3883 34.976197,-56.340701 47.234557,-65.674199 8.1379,11.324809 17.74869,54.784619 22.22772,81.323829 9.88745,39.85475 15.05514,80.54389 38.19161,87.80692 13.62655,-8.11559 37.21916,-39.35802 47.73165,-53.47966 16.97246,-23.73726 34.16693,-54.54326 59.2073,-58.02576 21.67485,21.97653 22.96564,57.23251 58.70449,83.03816 61.14799,6.4152 104.59752,-37.2659 149.38815,-87.94884"
                            fill="none"
                            stroke="white"
                            strokeWidth="50"
                            strokeLinecap="round"
                            initial={{ pathLength: 0 }}
                            animate={{ pathLength: 1 }}
                            transition={{ duration: 3, ease: "easeInOut" }}
                        />
                    </mask>

                    <filter id="specular">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="5" result="blur"/>
                        
                        <feSpecularLighting in="blur" surfaceScale="2" specularConstant="0.7"
                            specularExponent="8" lighting-color="#fd5aa6" result="specOut">
                            <feDistantLight azimuth="240" elevation="20" />
                        </feSpecularLighting>

                        <feGaussianBlur in="specOut" stdDeviation="2" result="blur2"/>

                        <feComposite in="blur2" in2="SourceAlpha" operator="in" result="specOut"/>

                        <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" 
                                    k1="0" k2="1" k3="1" k4="0" result="out2"/>
                        
                        <feMerge>
                        <feMergeNode in="out2"/>
                        </feMerge>
                    </filter>
                </defs>
            </motion.svg>
        </div>
    )
}

export default LipstickLine
